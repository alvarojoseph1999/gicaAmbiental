<div
  [ngClass]="{
    'bg-transparent shadow-2xl': isHome && !isScrolled,
    'bg-white shadow-md': !isHome || isScrolled
  }"
  class="rounded-3xl fixed top-[20px] left-0 right-0 z-50 w-[80%] mx-auto transition-all duration-300"
>
  <nav
    class="w-full px-6 py-4 flex items-center animate-fade-in justify-between"
  >
    <!-- Logo -->
    <a
      routerLink="/"
      [ngClass]="{
        'text-white': isHome && !isScrolled,
        'text-black': !isHome || isScrolled
      }"
      class="transition-colors duration-300 mr-auto"
    >
      <img src="assets/img/public/logo_gica.jpg" alt="" class="w-14 h-12" />
    </a>

    <!-- Menú de escritorio -->
    <div class="hidden md:flex space-x-6">
      <a
        routerLink="/"
        [ngClass]="{
          active: isRouteActive('/') || isRouteActive('/home'),
          'text-white': isHome && !isScrolled,
          'text-black': !isHome || isScrolled
        }"
        class="relative nav-link transition-colors duration-300"
      >
        Inicio
      </a>

      <div class="relative group">
        <button
          [ngClass]="{
            active: isNosotrosActive(),
            'text-white': isHome && !isScrolled,
            'text-black': !isHome || isScrolled
          }"
          class="relative nav-link flex items-center transition-colors duration-300"
        >
          Nosotros
        </button>
        <div
          class="absolute left-0 mt-2 w-48 bg-white shadow-lg rounded-md opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50"
        >
          <a
            routerLink="/history"
            [ngClass]="{ active: isRouteActive('/history') }"
            class="block px-4 py-2 text-gray-700 hover:bg-gray-100 nav-link"
          >
            Historia
          </a>
          <a
            routerLink="/objetives"
            [ngClass]="{ active: isRouteActive('/objetives') }"
            class="block px-4 py-2 text-gray-700 hover:bg-gray-100 nav-link"
          >
            Objetivos
          </a>
          <a
            routerLink="/workteam"
            [ngClass]="{ active: isRouteActive('/workteam') }"
            class="block px-4 py-2 text-gray-700 hover:bg-gray-100 nav-link"
          >
            Equipo de trabajo
          </a>
          <a
            routerLink="/collaboration"
            [ngClass]="{ active: isRouteActive('/collaboration') }"
            class="block px-4 py-2 text-gray-700 hover:bg-gray-100 nav-link"
          >
            Colaboración
          </a>
        </div>
      </div>

      <a
        routerLink="/education"
        [ngClass]="{
          active: isRouteActive('/education'),
          'text-white': isHome && !isScrolled,
          'text-black': !isHome || isScrolled
        }"
        class="relative nav-link transition-colors duration-300"
      >
        Educación y Divulgación
      </a>

      <a
        routerLink="/team"
        [ngClass]="{
          active: isRouteActive('/team'),
          'text-white': isHome && !isScrolled,
          'text-black': !isHome || isScrolled
        }"
        class="relative nav-link transition-colors duration-300"
      >
        Equipo
      </a>

      <a
        routerLink="/contact"
        [ngClass]="{
          active: isRouteActive('/contact'),
          'text-white': isHome && !isScrolled,
          'text-black': !isHome || isScrolled
        }"
        class="relative nav-link transition-colors duration-300"
      >
        Contacto
      </a>
    </div>

    <!-- Login y botón hamburguesa -->
    <div class="flex items-center space-x-4 md:space-x-4 md:ml-auto">
      <a
        routerLink="/login"
        class="bg-azul_primary text-white px-9 py-2 rounded-lg hover:bg-blue-600 transition-colors duration-300"
      >
        Login
      </a>

      <button
        (click)="toggleMobileMenu()"
        [ngClass]="{
          'text-white': isHome && !isScrolled,
          'text-black': !isHome || isScrolled
        }"
        class="md:hidden focus:outline-none transition-colors duration-300"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"
          />
        </svg>
      </button>
    </div>
  </nav>

  <!-- Menú móvil -->
  <div
    *ngIf="isMobileMenuOpen"
    class="absolute top-full left-0 right-0 bg-azul_secondary z-50 md:hidden px-4 pb-4 space-y-2 shadow-lg"
  >
    <a
      routerLink="/"
      [ngClass]="{
        'mobile-nav-link active': isRouteActive('/') || isRouteActive('/home')
      }"
      class="block text-white py-2"
    >
      Inicio
    </a>

    <div>
      <button
        (click)="toggleSubMenu()"
        [ngClass]="{ 'mobile-nav-link active': isNosotrosActive() }"
        class="w-full text-left text-white py-2"
      >
        Nosotros
      </button>
      <div *ngIf="isSubMenuOpen" class="ml-4 space-y-1">
        <a
          routerLink="/history"
          [ngClass]="{ 'mobile-nav-link active': isRouteActive('/history') }"
          class="block text-gray-300 py-1"
        >
          Historia
        </a>
        <a
          routerLink="/objetives"
          [ngClass]="{ 'mobile-nav-link active': isRouteActive('/objetives') }"
          class="block text-gray-300 py-1"
        >
          Objetivos
        </a>
        <a
          routerLink="/workteam"
          [ngClass]="{ 'mobile-nav-link active': isRouteActive('/workteam') }"
          class="block text-gray-300 py-1"
        >
          Equipo de trabajo
        </a>
        <a
          routerLink="/collaboration"
          [ngClass]="{
            'mobile-nav-link active': isRouteActive('/collaboration')
          }"
          class="block text-gray-300 py-1"
        >
          Colaboración
        </a>
      </div>
    </div>

    <a
      routerLink="/education"
      [ngClass]="{ 'mobile-nav-link active': isRouteActive('/education') }"
      class="block text-white py-2"
    >
      Educación y Divulgación
    </a>

    <a
      routerLink="/team"
      [ngClass]="{ 'mobile-nav-link active': isRouteActive('/team') }"
      class="block text-white py-2"
    >
      Equipo
    </a>

    <a
      routerLink="/contact"
      [ngClass]="{ 'mobile-nav-link active': isRouteActive('/contact') }"
      class="block text-white py-2"
    >
      Contacto
    </a>
  </div>
</div>
